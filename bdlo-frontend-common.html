<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../iron-icons/iron-icons.html">

<link rel="import" href="../paper-fab/paper-fab.html">
<link rel="import" href="../paper-dialog/paper-dialog.html">
<link rel="import" href="../paper-dialog-scrollable/paper-dialog-scrollable.html">

<link rel="import" href="fc-input-image.html">
<link rel="import" href="documents-edit-table.html">
<link rel="import" href="ui-dialog.html">


<script src="../es6-shim/es6-shim.min.js"></script>
<script src="../fetch/fetch.js"></script>
<script src="../lodash/dist/lodash.min.js"></script>
<script src="../moment/min/moment-with-locales.min.js"></script>
<script src="../revalidator/lib/revalidator.js"></script>
<script src="../flatiron-director/build/director.min.js"></script>
<script src="../namitos-fc/fc.js"></script>
<script src="util.js"></script>
<script>
	fc.widgets.selectCollection = function (obj, schema) {
		var el = util.dom.el('div');
		var input = util.dom.el('select', {}, util.dom.el('option'));
		var StructureClass = eval(schema.model);
		StructureClass.read().then(function (items) {
			console.log(items);
			items.forEach(function (item) {
				var el = util.dom.el('option', {
					attributes: {
						value: item._id
					}
				}, item.name || item.title || item.text);
				if (item._id == obj) {
					el.setAttribute('selected', true);
				}
				input.appendChild(el);
			});
		}).catch(err);
		el.appendChild(input);
		return {
			wrapper: el,
			input: input
		}
	};

	fc.widgets.base64Image = function (obj, schema) {
		console.log('base64Image construct!');
		var el = util.dom.el('div');
		var input = util.dom.el('fc-input-image', {
			value: obj
		});
		el.appendChild(input);
		return {
			wrapper: el,
			input: input
		}
	};
</script>
